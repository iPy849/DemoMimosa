---
import PageLayout from '../layouts/PageLayout.astro';
import { t } from '../i18n/utils';
import { getCollection } from 'astro:content';

const esDevelopments = await getCollection('developments', ({ data }) => data.lang === 'es');

const sections = [
  {
    titleKey: "sitemap.sec1",
    links: [
      { nameKey: "nav.home", href: '/' },
      { nameKey: "nav.about", href: '/about' },
      { nameKey: "nav.developments", href: '/developments' },
      { nameKey: "nav.blog", href: '/blog' },
      { nameKey: "nav.contact", href: '/contact' },
    ],
  },
  {
    titleKey: "sitemap.sec2",
    links: esDevelopments.map((dev) => ({
      name: dev.data.title,
      href: `/developments/${dev.data.slug}`,
    })),
  },
  {
    titleKey: "sitemap.sec3",
    links: [
      { nameKey: "footer.privacy", href: "#" },
      { nameKey: "footer.terms", href: "#" },
    ],
  },
];
---

<PageLayout
  title="Mapa del Sitio | MIMOSA Real Estate"
  description="Navega por todas las secciones del portal de MIMOSA Real Estate."
  keywords="mapa del sitio, navegacion, mimosa real estate"
>
  <section class="pt-32 pb-24 px-6">
    <div class="max-w-4xl mx-auto">
      <div class="flex items-center gap-4 mb-8">
        <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center">
          <svg class="w-6 h-6 text-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
        </div>
        <div>
          <h1 class="text-3xl font-headline font-bold text-foreground" data-t="sitemap.title">{t("sitemap.title")}</h1>
          <p class="text-muted-foreground font-body" data-t="sitemap.desc">{t("sitemap.desc")}</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {sections.map((section) => (
          <div class="bg-card rounded-lg border border-border p-6">
            <h2 class="text-lg font-headline font-semibold text-foreground mb-4 pb-3 border-b border-border" data-t={section.titleKey}>{t(section.titleKey)}</h2>
            <ul class="flex flex-col gap-3">
              {section.links.map((link: any) => (
                <li>
                  <a href={link.href} class="flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors font-body text-sm group">
                    <svg class="w-4 h-4 text-primary/50 group-hover:text-primary transition-colors" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                    {link.nameKey ? (
                      <span data-t={link.nameKey}>{t(link.nameKey)}</span>
                    ) : (
                      <span>{link.name}</span>
                    )}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </section>
</PageLayout>
